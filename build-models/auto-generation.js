const uuid = require("uuid/v4");

const needsGeneration = (params, properties) => {
  Object.keys(properties).forEach(property => {
    const isHash = properties[property].keyType === "HASH";
    const isAutoGenerated = properties[property].autoGenerated;
    const defaultValue = properties[property].defaultValue;

    if (!params[property] && isHash && isAutoGenerated)
      params[property] = uuid();
    if (!params[property] && defaultValue) params[property] = defaultValue;
  });
};

module.exports = { needsGeneration };
